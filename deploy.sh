#!/usr/bin/env sh

set -x  # è¿™é‡Œæ˜¯ä¸ºäº†çœ‹é”™è¯¯æ—¥å¿—

# æ‰“åŒ…é¡¹ç›®
npm run build

# è¿›å…¥æ‰“åŒ…åçš„æ–‡ä»¶å¤¹
cd dist

# åˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“ï¼Œå¦‚æœåœ¨ dist ç›®å½•ä¸­è¿˜æ²¡æœ‰ Git ä»“åº“çš„è¯ã€‚
git init
# æ·»åŠ æ‰€æœ‰æ›´æ”¹è¿‡çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºã€‚
git add -A
# æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ›´æ”¹ï¼Œå¹¶é™„ä¸Šä¸€ä¸ªæäº¤ä¿¡æ¯ã€‚
git commit -m 'ğŸš€è‡ªåŠ¨éƒ¨ç½²'

# å°†å½“å‰åˆ†æ”¯å¼ºåˆ¶æ¨é€åˆ° GitHub ä¸Šçš„æŒ‡å®šåˆ†æ”¯ã€‚
# -f é€‰é¡¹è¡¨ç¤ºå¼ºåˆ¶æ¨é€ï¼Œå®ƒä¼šè¦†ç›–è¿œç¨‹åˆ†æ”¯ä¸Šçš„ä»»ä½•æ›´æ”¹ã€‚
# è¿™é‡Œçš„ master:sh-pages è¡¨ç¤ºå°†æœ¬åœ°çš„ master åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹çš„ sh-pages åˆ†æ”¯ã€‚
git push -f https://github.com/Ele-Cat/test-sh-pages.git master:sh-pages